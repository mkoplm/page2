<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
				  "mybatis-3-mapper.dtd">

<mapper namespace="MediaXml">

	<resultMap id="MediaResult" type="media" >
		<result property="mcode" column="m_code" />
		<result property="mname" column="m_name" />
		<result property="msinger" column="m_singer" />
		<result property="mdownload" column="m_download" />
		<result property="mprice" column="m_price" />
		<result property="limitage" column="m_limitAge" />
	</resultMap>

	
	<insert id="insertMedia" parameterType="media">
		insert into media
		values (#{mcode}, #{mname}, #{msinger}, #{mdownload}, #{mprice}, #{limitage})
	</insert>
	
	<update id="updateMedia" parameterType="media">
		update media
		set m_name = #{mname}, m_singer = #{msinger},  m_download= #{mdownload}, m_price = #{mprice}, m_limitAge=#{limitage}
		where m_code = #{mcode}
	</update>
	
	<update id="sellMedia" parameterType="int">
		update media
		set m_download= m_download+1
		where m_code = #{mcode}
	</update>
	
	<delete id="deleteMediaByMcode" parameterType="int">
		delete
		from media
		where m_code = #{mcode}
	</delete>
	
	<select id="selectMediaByMcode" parameterType="int" resultMap="MediaResult">
		select * from media where m_code=#{mcode}
	</select>
	
	<select id="selectAllMedia" resultMap="MediaResult">
		select * from media
	</select>

	<delete id="deleteAllMedia">
		delete
		from media
	</delete>

</mapper>